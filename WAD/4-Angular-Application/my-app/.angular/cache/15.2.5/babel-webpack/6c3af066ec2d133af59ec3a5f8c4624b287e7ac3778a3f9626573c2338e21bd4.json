{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/jayal/Downloads/SPPU-WADL-Assignment-master/SPPU-WADL-Assignment-master/Practical/4-Angular-Application/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport class LoginComponent {\n  constructor(router) {\n    this.router = router;\n    this.usernameError = '';\n    this.passwordError = '';\n  }\n  getData(username, password) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.usernameError = username ? '' : 'Username is required';\n      _this.passwordError = password ? '' : 'Password is required';\n      if (username && password) {\n        var myHeaders = new Headers();\n        myHeaders.append('Content-Type', 'application/json');\n        var raw = JSON.stringify({\n          username: username,\n          password: password\n        });\n        var requestOptions = {\n          method: 'POST',\n          headers: myHeaders,\n          body: raw,\n          redirect: 'follow'\n        };\n        fetch('http://localhost:2324/login', requestOptions).then(response => response.json()).then(result => {\n          if (result.token) {\n            document.cookie = 'jwt=' + result.token;\n            localStorage.setItem('user', JSON.stringify(result.user));\n            _this.router.navigate(['']);\n          } else {\n            _this.usernameError = result.message == 'Username Not Found' ? result.message : '';\n            _this.passwordError = result.message == 'Incorrect Password' ? result.message : '';\n          }\n        }).catch(error => console.log('error', error));\n      }\n    })();\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.Router));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 25,\n  vars: 2,\n  consts: [[1, \"container\", \"py-5\"], [1, \"col-12\", \"col-sm-10\", \"col-md-6\", \"col-lg-4\", \"m-auto\", \"border\", \"shadow\", \"rounded\", \"p-4\"], [1, \"mb-4\", \"pb-2\", \"border-bottom\"], [1, \"mb-3\"], [\"for\", \"username\", 1, \"form-label\"], [\"type\", \"username\", \"name\", \"username\", \"aria-describedby\", \"usernameHelpId\", \"placeholder\", \"abc\", 1, \"form-control\"], [\"username\", \"\"], [\"id\", \"usernameHelpId\", 1, \"form-text\", \"text-danger\"], [\"for\", \"\", 1, \"form-label\"], [\"type\", \"password\", \"name\", \"password\", \"aria-describedby\", \"passwordHelpId\", \"placeholder\", \"Your Password\", 1, \"form-control\"], [\"password\", \"\"], [\"id\", \"passwordHelpId\", 1, \"form-text\", \"text-danger\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [\"loginBtn\", \"\"], [\"href\", \"/signup\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r3 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\", 2);\n      i0.ɵɵtext(3, \"User Login\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"label\", 4);\n      i0.ɵɵtext(6, \"username\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"input\", 5, 6);\n      i0.ɵɵelementStart(9, \"small\", 7);\n      i0.ɵɵtext(10);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(11, \"div\", 3)(12, \"label\", 8);\n      i0.ɵɵtext(13, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(14, \"input\", 9, 10);\n      i0.ɵɵelementStart(16, \"small\", 11);\n      i0.ɵɵtext(17);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(18, \"button\", 12, 13);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_18_listener() {\n        i0.ɵɵrestoreView(_r3);\n        const _r0 = i0.ɵɵreference(8);\n        const _r1 = i0.ɵɵreference(15);\n        return i0.ɵɵresetView(ctx.getData(_r0.value, _r1.value));\n      });\n      i0.ɵɵtext(20, \" Login \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(21, \"br\")(22, \"hr\");\n      i0.ɵɵelementStart(23, \"a\", 14);\n      i0.ɵɵtext(24, \"Create An Account?\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(10);\n      i0.ɵɵtextInterpolate(ctx.usernameError);\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(ctx.passwordError);\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;AAQA,OAAM,MAAOA,cAAc;EAIzBC,YAAoBC,MAAc;IAAd,WAAM,GAANA,MAAM;IAH1B,kBAAa,GAAW,EAAE;IAC1B,kBAAa,GAAW,EAAE;EAEW;EAE/BC,OAAO,CAACC,QAAa,EAAEC,QAAa;IAAA;IAAA;MACxC,KAAI,CAACC,aAAa,GAAGF,QAAQ,GAAG,EAAE,GAAG,sBAAsB;MAC3D,KAAI,CAACG,aAAa,GAAGF,QAAQ,GAAG,EAAE,GAAG,sBAAsB;MAE3D,IAAID,QAAQ,IAAIC,QAAQ,EAAE;QACxB,IAAIG,SAAS,GAAG,IAAIC,OAAO,EAAE;QAC7BD,SAAS,CAACE,MAAM,CAAC,cAAc,EAAE,kBAAkB,CAAC;QAEpD,IAAIC,GAAG,GAAGC,IAAI,CAACC,SAAS,CAAC;UACvBT,QAAQ,EAAEA,QAAQ;UAClBC,QAAQ,EAAEA;SACX,CAAC;QAEF,IAAIS,cAAc,GAAW;UAC3BC,MAAM,EAAE,MAAM;UACdC,OAAO,EAAER,SAAS;UAClBS,IAAI,EAAEN,GAAG;UACTO,QAAQ,EAAE;SACX;QAEDC,KAAK,CAAC,6BAA6B,EAAEL,cAAc,CAAC,CACjDM,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,EAAE,CAAC,CACnCF,IAAI,CAAEG,MAAM,IAAI;UACf,IAAIA,MAAM,CAACC,KAAK,EAAE;YAChBC,QAAQ,CAACC,MAAM,GAAG,MAAM,GAAGH,MAAM,CAACC,KAAK;YACvCG,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEhB,IAAI,CAACC,SAAS,CAACU,MAAM,CAACM,IAAI,CAAC,CAAC;YACzD,KAAI,CAAC3B,MAAM,CAAC4B,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;WAC3B,MAAM;YACL,KAAI,CAACxB,aAAa,GAChBiB,MAAM,CAACQ,OAAO,IAAI,oBAAoB,GAAGR,MAAM,CAACQ,OAAO,GAAG,EAAE;YAC9D,KAAI,CAACxB,aAAa,GAChBgB,MAAM,CAACQ,OAAO,IAAI,oBAAoB,GAAGR,MAAM,CAACQ,OAAO,GAAG,EAAE;;QAElE,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAKC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEF,KAAK,CAAC,CAAC;;IACjD;EACH;;AA1CWjC,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA,cAAc;EAAAoC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;;MCR3BC,8BAA4B;MAIYA,0BAAU;MAAAA,iBAAK;MACnDA,8BAAkB;MACyBA,wBAAQ;MAAAA,iBAAQ;MACzDA,8BAOE;MACFA,gCAAyD;MAAAA,aAEvD;MAAAA,iBAAQ;MAEZA,+BAAkB;MACiBA,yBAAQ;MAAAA,iBAAQ;MACjDA,gCAOE;MACFA,kCAAyD;MAAAA,aAEvD;MAAAA,iBAAQ;MAEZA,uCAKC;MADCA;QAAAA;QAAA;QAAA;QAAA,OAASA,gDAAuC;MAAA,EAAC;MAEjDA,wBACF;MAAAA,iBAAS;MACTA,sBAAM;MAENA,8BAAkB;MAAAA,mCAAkB;MAAAA,iBAAI;;;MA5BmBA,gBAEvD;MAFuDA,uCAEvD;MAYuDA,eAEvD;MAFuDA,uCAEvD","names":["LoginComponent","constructor","router","getData","username","password","usernameError","passwordError","myHeaders","Headers","append","raw","JSON","stringify","requestOptions","method","headers","body","redirect","fetch","then","response","json","result","token","document","cookie","localStorage","setItem","user","navigate","message","catch","error","console","log","selectors","decls","vars","consts","template","i0"],"sourceRoot":"","sources":["C:\\Users\\jayal\\Downloads\\SPPU-WADL-Assignment-master\\SPPU-WADL-Assignment-master\\Practical\\4-Angular-Application\\my-app\\src\\app\\login\\login.component.ts","C:\\Users\\jayal\\Downloads\\SPPU-WADL-Assignment-master\\SPPU-WADL-Assignment-master\\Practical\\4-Angular-Application\\my-app\\src\\app\\login\\login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css'],\n})\nexport class LoginComponent {\n  usernameError: string = '';\n  passwordError: string = '';\n\n  constructor(private router: Router) {}\n\n  async getData(username: any, password: any) {\n    this.usernameError = username ? '' : 'Username is required';\n    this.passwordError = password ? '' : 'Password is required';\n\n    if (username && password) {\n      var myHeaders = new Headers();\n      myHeaders.append('Content-Type', 'application/json');\n\n      var raw = JSON.stringify({\n        username: username,\n        password: password,\n      });\n\n      var requestOptions: Object = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow',\n      };\n\n      fetch('http://localhost:2324/login', requestOptions)\n        .then((response) => response.json())\n        .then((result) => {\n          if (result.token) {\n            document.cookie = 'jwt=' + result.token;\n            localStorage.setItem('user', JSON.stringify(result.user));\n            this.router.navigate(['']);\n          } else {\n            this.usernameError =\n              result.message == 'Username Not Found' ? result.message : '';\n            this.passwordError =\n              result.message == 'Incorrect Password' ? result.message : '';\n          }\n        })\n        .catch((error) => console.log('error', error));\n    }\n  }\n}\n","<div class=\"container py-5\">\n  <div\n    class=\"col-12 col-sm-10 col-md-6 col-lg-4 m-auto border shadow rounded p-4\"\n  >\n    <h3 class=\"mb-4 pb-2 border-bottom\">User Login</h3>\n    <div class=\"mb-3\">\n      <label for=\"username\" class=\"form-label\">username</label>\n      <input\n        type=\"username\"\n        class=\"form-control\"\n        name=\"username\"\n        #username\n        aria-describedby=\"usernameHelpId\"\n        placeholder=\"abc\"\n      />\n      <small id=\"usernameHelpId\" class=\"form-text text-danger\">{{\n        usernameError\n      }}</small>\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"\" class=\"form-label\">Password</label>\n      <input\n        type=\"password\"\n        class=\"form-control\"\n        name=\"password\"\n        #password\n        aria-describedby=\"passwordHelpId\"\n        placeholder=\"Your Password\"\n      />\n      <small id=\"passwordHelpId\" class=\"form-text text-danger\">{{\n        passwordError\n      }}</small>\n    </div>\n    <button\n      type=\"button\"\n      class=\"btn btn-primary\"\n      #loginBtn\n      (click)=\"getData(username.value, password.value)\"\n    >\n      Login\n    </button>\n    <br />\n    <hr />\n    <a href=\"/signup\">Create An Account?</a>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}